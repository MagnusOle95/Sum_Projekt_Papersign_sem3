doctype html
head
  meta(charset='utf-8')
  meta(name='viewport' content='width=device-width, initial-scale=1')
  link(href='https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css' rel='stylesheet' integrity='sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi' crossorigin='anonymous')
  style 
    include underskrift.css
    include common.css
  title Signature
.tabbtn
  form(action = "/kasse" method="get")
    input(class="button" type="submit" value="Kasse")
  form(action = "/faktura" method="get")
    input(class="button" type="submit" value="Faktura")
  form(action= "/crud" method="get")
    input(class="button" type="submit" value="Crud")
#app
  canvas#sig
.funct
  input#text(type='text' placeholder='Navn' name="Navn" required)
  button#gemSig.gem(type='button') Gem
  button#sletSig.slet(type='button') Slet 
#image
  script(src='https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.5.3/jspdf.debug.js' integrity='sha512-cLuyDTDg9CSseBSFWNd4wkEaZ0TBEpclX0zD3D6HjI19pO39M58AgJ1SjHp6c7ZOp0/OCRcC2BCvvySU9KJaGw==' crossorigin='anonymous' referrerpolicy='no-referrer')
  script(src='https://cdn.jsdelivr.net/npm/signature_pad@4.0.0/dist/signature_pad.umd.min.js')
  script(src='https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js' integrity='sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3' crossorigin='anonymous')
  script(src='https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js' integrity='sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3' crossorigin='anonymous')
  script(src='https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.min.js' integrity='sha384-IDwe1+LCz02ROU9k972gdyvl+AESN10+x7tBKgc9I5HFtuNz0wWnPclzo6p9vxnk' crossorigin='anonymous')
  script(type='module').
    let count =0;
    var signaturePad
    var canvas;
    function setupSigBox(){
    canvas = document.querySelector("canvas");
    canvas.setAttribute("width", 700);
    canvas.setAttribute("height", 400);
    signaturePad = new SignaturePad(canvas);
    }
    document.addEventListener("DOMContentLoaded",setupSigBox);
    function clearSig(){
    signaturePad.clear()
    }
    document.getElementById("sletSig").addEventListener("click",clearSig)
    // gem funktion skal håndteres af express før den virker rigtig
    var button= document.getElementById("gemSig")
    button.onclick=()=>{
    var text=document.getElementById("text").value
    var imageData= signaturePad.toDataURL();
    var doc = new jsPDF()
    doc.setFontSize(40)
    doc.text("Lærer navn: "+text,40,40)
    doc.addImage(imageData,"JPEG",15,40,180,180)
    doc.save(`underskrift ${text}.pdf`)
    }
